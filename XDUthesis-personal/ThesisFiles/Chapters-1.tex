{\tiny {\tiny }}\chapter{绪论}
\section{选题背景及意义}
\subsection{选题研究内容}
伴随着技术的革新和工艺上的不断进步，工业产品的表面精度检测要求不断提升，目前的缺陷检测方面技术开始越加复杂，各种的技术的工作方式和原理开始出现变更，体现在生活中的各个领域，高效的技术手段和实现方法直接决定了检测系统的可靠性和检测方法的便捷性。表面缺损一般是采用的加工方法和机器磨合有关联造成的，缺损的表象可能包括裂纹、气泡、毛刺等缺陷。目前，光学显微镜仍然是使用最广泛的显微镜。但是在同时，传统人工方式仍然存在不少的局限性，如：使用人员使用显微镜时，视野不畅，容易造成视觉疲劳;在观察时，无法多人观察进行交流;不能对图像进行必要的处理等。


把计算机应用在产品的缺陷检测当中，可以使检测的标准保持稳定，同时能长时间运行，可以对微小尺寸的缺陷进行在线实时识别与分类，检测结果更具备客观性。数字图像处理技术和图像处理算法的不断发展，能够结合传统光学仪器和计算机技术各自的优势，更好的实现多种数据采样和处理功能，实现系统平台的图像处理，包括去噪，模块识别等功能\cite{machine}。实现对显微镜中的显微图像实时/远程的监测，可以在公网上进行相应图片的显示。同时，关于数据的归档，显示和报表可进行额外的分析和处理、综合。在显微成像的数字化平台上，国内外一些仪器厂已经开始尝试研制，部分已有商品化的产品出售\cite{light3D}\cite{eletnature}。相比和计算机直接进行显微镜连接的情况，使用本文的平台可以更方便的在小空间内使用，具有系统集成化和小型化的特性，亦能加强所需目标的对比度，有快速存储、归档、显示等的功用。


%本文主要说明了新型技术的使用和传统方式的对比。传统人工方式效率低，出错率较高，借助现有的图像增强和识别技术，可以加快验证进程，进一步匹配流水线。此外，阐述了实时检测的产品识别的价值和意义。
%关注光学成像部分，设计光学系统，实现图像的处理，归档，显示，性能报表等相关功能。借助，完成系统的图像处理部分，可包括去噪，模块识别等功能。此外，关于数据的归档，显示和报表可进行额外的分析和处理、综合。硬件选用上，考虑ARM系列市场份额持续上升，学习成本较低，适应于通用型应用，选用基于ARM的嵌入式处理器技术，其相比于FPGA和DSP，有通用性强，占用体积小，能耗低，性价比高，平台兼容性好等多方面特性。CPU为RISC架构，单一指令周期，长流水线，TDP可以做到较低，于是此处通用选型选用ARM作为主控。在成像方面的传感器上，选用手机上常见的摄像头模块，易于获得，接口选用高速串行的CSI接口，频率高，单位数据传输量大，在后续处理中完成图像的预处理，辨识问题图片的编号，同时放在云上备份，做到图片的后续存储归档。
%图像系统采集的硬件设计和选型。在硬件设计上，需要考虑成本分配，易用性，可扩展性，兼容性，平台性能，产品参数等多方面因素。此次主要需要借助GPU的图像处理，因此不考虑DSP和FPGA模拟处理和外接芯片的方式，在版型上，为了库移植的方便以及资料的充分情况，决定选用raspberrypi老版本。
\subsection{解决问题}
硬件成本的不断下降使曾经昂贵的技术使用更加广泛，显微成像的单一器具已经开始应用在生活的部分方面，在此基础的改进上，增加数据的处理模块，在不同指标不同场合的跟进测试，是目前的一个研究热点。

在此需求上，本文设计了基于树莓派的数字显微成像系统，尝试在缺陷材料上进行进一步测试。在设计中，选用了索尼的第二代BSI光照CMOS图像传感器IMX135，利用低压差分信号抗干扰来提高信噪比，图像成像效果更佳。处理上使用专门的处理算法迭代处理。


\section{国内外研究现状}
\subsection{显微成像国内外发展现状}
显微镜的起源较早，但是在后期才发展快速。早在2500年前的《墨经》中，就已经有了凹透镜的记载，然而凸透镜的发展却一直没有进展。直到16世纪末期，荷兰的眼镜商詹森( Zaccharias Janssen) 和他的儿子尝试了一次将两个凸透镜放入到同一个镜筒中，发明了人类历史上第一个光学显微镜。而后在1609年，著名的天文学之父伽利略在这个实验的基础上，分解出相关的物理学原理，并依据自身的理论发明了更好聚焦的显微镜。

而后的列文虎克将放大倍数大大的提升了一截，第一次能够发现微观的生物和非生物现象，出版了极多的论文，同时极大的推进了生物学的发展。后之显微镜之父，罗伯特﹒虎克仿制了一台与虎克研制的相同的显微镜，证实了在水中微生物的存在，1830年，利斯忒 (Joseph Jackson Lister，1786-1869) 用几种有不同间距的透镜组减小了球面像差，从而进一步改进了显微镜。而后，1872年德国的数学家和物理学家 Ernst Abbe 改进了玻璃的制造和生产工艺，改进并生产出有均一折射率的光学级玻璃。\cite{microimaging}\cite{microimagingelc}

受到衍射限制，光学显微镜的分辨率达到显微镜的分辨率极限，即：
\begin{center}
	$ R = \lambda/(n \cdot \sin(\alpha)) $ 
\end{center}
这里的 R 是分辨率，$\alpha$ 是孔径张角，$\lambda$ 是波长 , $n\cdot\sin(\alpha)$ 是数值孔径，$n$是折射率。 
	
显微镜的改变多样，根据不同用途可以对结构做出适当的改变，如近年的激光共焦扫描显微镜。也有使用极短波长的电子束作为照明源的电子显微镜。透射电子显微镜(TEM)、扫描电子
显微镜(SEM)、场电子显微镜(FEM)、场离子显微镜(FIM)、低能电子衍射(LEED)、俄歇谱仪(AES)、光电
子能谱(ESCA)、电子探针等。这些技术在表面科学各领域的研究中起着重要的作用\cite{xianwei}。

多年来，人们为提高显微镜的各类性能付出了许多时间和代价，随着计算机相关技术的发明和各类数学和理论工具的不断演进，光学设计的理论和方法也在不断改进，材料性能的不断提升，工艺和检测手段的不断完善，理论基础更改的创新，让光学显微镜的成像质量接近可视光衍射极限；人们可以使用标本染色、暗场、相衬、荧光、干涉、偏光等观察技术，便于光学显微镜能够观察各类标本。尽管近年来电子显微镜等显微仪器先后被发明，而且在某些方面具备各自的特点，但在使用方式和使用复杂度方面仍然无法与光学显微镜相比较，光学显微镜有着各类广泛的应用；此外，光学显微镜与激光技术、计算机技术、机械自动化等学科交叉之后，进一步扩大了光学显微镜的应用领域。

国内外很多公司和科研院所都关注于光学显微镜的自动化和智能化相关的研究，尤其是在德国和日本。在2004年始就有提出一些代表性的方法和相关设备。如德国 Leica 的 DM 系列智能型微电脑控制光学显微镜，日本奥林巴斯的智能显微镜 FSX100 ，上海北昂医疗技术有限公司的具有显微镜的自动推片和自动调焦系统，名为 BEION 全自动显微镜等。

\subsection{光学薄膜检测的发展现状}
光学薄膜的应用始于２０世纪３０年代，到现在已形成一门独立的技术，广泛应用于科研、工业、医疗、航空、航天、国防，
科学检测、光显示和光通讯等行业中\cite{baomo2002}。传统的光学薄膜是以光的干涉为基础。光波是一种电磁波，按照其波长的不同可分成可见光、红外线和紫外线等，
当光波投射到物体上时，有一部分在它表面上被反射，剩下的部分通过折射进入到该物体中，其中有一部分被吸收变为热能，剩下的部分透射的方式生成。

传统光学薄膜有反射膜、增透膜、偏振膜、分光膜和位相膜等。在新型光学薄膜中，多种新出现的薄膜为解
决光学薄膜产业化面临的情况提供了较为全面的解决方案，包括高强度激光器、金刚石及类金刚石膜、太阳能选择性吸收膜和光通信用光学膜等\cite{baomodev2012}。

过百年的时间使得光学薄膜理论及设计工艺的不断完善，多类的光学薄膜让标准化测试光学薄膜的各项指标开始被重视。因此在光学薄膜制备过程中对其表面进行指标检测至关重要，更好保证在生产中获得合格的 高性能光学薄膜。

光学薄膜技术涉及多个技术领域，光学薄膜的制作方法多样，在国内标准发展的情况中，可以将光学薄膜的标准划分为下面几种：

（１）膜层功能。光学薄膜可实现诸如滤光、反射、分束、增透等不同功能，满足不同设备材料的各类要求。

（２）面形偏差。理想的光学表面和现实中的薄膜表面将存在一定的偏差，称之为为面形偏差。

（３）表面疵病。镀膜表面会存在一定的缺陷，如擦痕、麻点、凸起等，统称为表面疵病。表面疵病程度会影
响光学系统的性能，进而制约光学薄膜的近一个月。

（４）环境适应性。光学薄膜必然工作于一定的环境条件（湿度、温度等），环境的适应性表现在可否适应在不同特点环境下的长时间无故障工作。

（５）产品应用。光学薄膜最后构成产品和光学器件，在仪器中满足一定的需求。

而大多数情况下，一个仪器不会只使用一种光学薄膜，可能同时叠加多种光学薄膜，这需要了解其中的兼容性。这也构成各类对光学薄膜构成影响的常见因素。

我们这里重点关注光学薄膜的表面缺陷检测。光学薄膜为透明的材质，需要检测的主要缺陷包括：气泡、尘埃、异物、划痕与皱褶。常见的检测方法包括显微镜检测法，光热偏转法，

\section{本文主要任务和安排}
\subsection{主要任务和安排}
硬件成本的不断下降使曾经昂贵的技术使用更加广泛，显微成像的单一器具已经开始应用在生活的部分方面，在此基础的改进上，增加数据的处理模块，在不同指标不同场合的跟进测试，是目前的一个研究热点。

在此需求上，本文设计了基于树莓派的数字显微成像系统，尝试在缺陷材料上进行进一步测试。在设计中，选用了索尼的第二代BSI光照CMOS图像传感器IMX135，利用低压差分信号抗干扰来提高信噪比，使图像成像效果更佳。加之合适的光源照明系统，良好的完成预期的光照处理要求。

在研究过程中，更希望是显微成像方面在传统设备转向电子化，数字化，智能化，互联网化的一种可行性的尝试。进一步改善整体流程，加强后续的研究和信息处理的长尾方式，提高部署的高效性，降低生产成本。

	
\subsection{具体章节结构}
%讲实际的情况了解。

本文主要的内容设置如下：

第一章对本文的研究原理和背景做基本的阐述，希望解决的问题。并查阅相关显微成像和光学薄膜的国内外发展现状，在此基础上进一步改进，介绍本文的主要结构和目前安排。

第二章设计显微成像系统硬件部分，对显微成像的光学原理做出阐述，并进行目镜物镜的选型。图像传感器功能和类型性能比较选型，数据传输接口的比较，显示处理方式的比较和选择，设计出一个较完整的低耦合化方案。

第三章对显微图像处理平台进行系统设计，查阅研究了相关CSI的接口在树莓派的驱动程序，介绍V4L2框架的应用和使用。并分析图像算法的在预处理和处理上的研究，包括线性滤波、中值滤波、高斯滤波，边缘检测等方法，并研究了显微图像的相关拼接算法，设计了阈值分割和像素投影算法。最后在Web上展示处理后的图像，同时可以查阅前期归档后的图像。

第四章设计显微成像的实验测试系统，验证系统可行性，并依据照明光线变量验证可以达到的系统精度，满足系统的测试要求指标。

第五章为论文的总结和展望，总结主要研究学习工作，提出了可能存在的问题和未来的改进思路方向。


\subsection{本章小结}
本章首先介绍了选题的来由和解决的问题，简要说明了显微镜的发展史，介绍了显微成像的光学结构和组成原理，同时简单说明了光学薄膜检测的问题和传统方式。在介绍基本情况之后，详细说明论文的架构安排、学习的内容和完成的主要工作。
